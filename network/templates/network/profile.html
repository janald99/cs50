{% extends "network/layout.html" %}

{% load static %}

{% block body %}
    <h2 id="user-header" data-username="{{ user_profile.username }}">{{ user_profile.username }}'s Profile</h2>

    <p id="follower-count">Followers: {{ user_profile.followers.count }}</p>
    <p id="following-count">Following: {{ user_profile.following.count }}</p>

    {% if user.is_authenticated %}
        {% if not is_self %}
            <button id="follow-button" data-is-following="{{ is_following }}">Follow</button>
        {% endif %}
    {% endif %}

    <h3>Posts</h3>
    <div class="post-list">
        {% for post in user_posts %}
            <div class="post">
                <p><a href="{% url 'profile' post.user.username %}"><strong>{{ post.user.username }}</strong></a></p>
                <p>{{ post.content }}</p>
                <p>Posted on: {{ post.timestamp }}</p>
                <p>Likes: {{ post.likes.count }}</p>
            </div>
        {% empty %}
            <p>No posts yet.</p>
        {% endfor %}
    </div>

    <script>
        // Set the CSRF token as a JavaScript variable
        const csrfToken = "{{ csrf_token }}";
        // var followersCount = "{{ user_profile.followers.count }}";
        // var followingCount = "{{ user_profile.following.count }}";
        // var updatedFollowers = parseInt("{{ user_profile.followers.count }}", 10);
        // var updatedFollowing = parseInt("{{ user_profile.following.count }}", 10);
    </script>
    <script src="{% static 'network/profile.js' %}"></script>
{% endblock %}
